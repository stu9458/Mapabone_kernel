From 270086192a0e4a2bdc313fb3947901dad07f64b2 Mon Sep 17 00:00:00 2001
From: Robert Nelson <robertcnelson@gmail.com>
Date: Tue, 19 Aug 2014 11:51:29 -0500
Subject: [PATCH 03/17] am335x-boneblack: split out emmc

Signed-off-by: Robert Nelson <robertcnelson@gmail.com>
---
 arch/arm/boot/dts/am335x-boneblack-emmc.dtsi | 16 ++++++++++++++++
 arch/arm/boot/dts/am335x-boneblack.dts       | 11 ++---------
 2 files changed, 18 insertions(+), 9 deletions(-)
 create mode 100644 arch/arm/boot/dts/am335x-boneblack-emmc.dtsi

diff --git a/arch/arm/boot/dts/am335x-boneblack-emmc.dtsi b/arch/arm/boot/dts/am335x-boneblack-emmc.dtsi
new file mode 100644
index 0000000..e0d991f
--- /dev/null
+++ b/arch/arm/boot/dts/am335x-boneblack-emmc.dtsi
@@ -0,0 +1,16 @@
+/*
+ * Copyright (C) 2012 Texas Instruments Incorporated - http://www.ti.com/
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+&mmc2 {
+	vmmc-supply = <&vmmcsd_fixed>;
+	pinctrl-names = "default";
+	pinctrl-0 = <&emmc_pins>;
+	bus-width = <8>;
+	status = "okay";
+	ti,vcc-aux-disable-is-sleep;
+};
diff --git a/arch/arm/boot/dts/am335x-boneblack.dts b/arch/arm/boot/dts/am335x-boneblack.dts
index f51ad62..3b1ed82 100644
--- a/arch/arm/boot/dts/am335x-boneblack.dts
+++ b/arch/arm/boot/dts/am335x-boneblack.dts
@@ -21,20 +21,13 @@
 	vmmc-supply = <&vmmcsd_fixed>;
 };
 
-&mmc2 {
-	vmmc-supply = <&vmmcsd_fixed>;
-	pinctrl-names = "default";
-	pinctrl-0 = <&emmc_pins>;
-	bus-width = <8>;
-	status = "okay";
-	ti,vcc-aux-disable-is-sleep;
-};
-
 &am33xx_pinmux {
 	pinctrl-names = "default";
 	pinctrl-0 = <&clkout2_pin>;
 };
 
+#include "am335x-boneblack-emmc.dtsi"
+
 &lcdc {
 	status = "okay";
 };
-- 
2.1.0

